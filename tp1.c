#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
int main()
{
  int x1;
  x1=fork();
  switch (x1)
  {
     case -1:
       printf("ERROR IS HERE");
     break;
     

     case 0:
      printf("Im the son P1 and my PID is %d and my PPID is %d\n",getpid(),getppid());
      system("ps");
     break;
   
     default: 
      wait(0);
    
      {
         int x2;
         x2=fork();
         switch (x2)
         {
          case -1:
          printf("ERROR IS HERE");
          break;
     

          case 0:
         
          printf("Im the son P2 and my PID is %d and my PPID is %d\n",getpid(),getppid());
          system("ps");

            int x3;
            x3=fork();
            switch (x3)
            {
             case -1:
             printf("ERROR IS HERE");
             break;
     

             case 0:
             printf("Im the son P2 1_and my PID is %d and my PPID is %d\n",getpid(),getppid());
             system("ps");
             break;
   
             default:
             { 
                  int x4;
                  x4=fork();
                  switch (x4)
                  {
                    case -1:
                    printf("ERROR IS HERE");
                    break;
     
                    case 0:
                    printf("Im the son P2_2 and my PID is %d and my PPID is %d\n",getpid(),getppid());
                    system("ps");
                    break;
   
					default:   wait(0);
     
                   }
                   
                   
           wait(0);
             
              }


            }


            break;
   
          default: 
          wait(0);
          wait(0);
    
          printf("I am father P and my PID is  %d and my PPID is %d\n",getpid(),getppid());    
         }
 
      }
     
   }
   return 0;

}
